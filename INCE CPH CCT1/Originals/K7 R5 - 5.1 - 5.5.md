#CE #CCT1 
- - -
## Table of Contents

- [[#5.2 Sequential Circuits|5.2 Sequential Circuits]]
- [[#5.3 Storage Elements: Latches|5.3 Storage Elements: Latches]]
	- [[#5.3 Storage Elements: Latches#SR latch|SR latch]]
	- [[#5.3 Storage Elements: Latches#D Latch (Transparent Latch)|D Latch (Transparent Latch)]]
- [[#5.4 Storage Elements: Flip-Flops|5.4 Storage Elements: Flip-Flops]]
	- [[#5.4 Storage Elements: Flip-Flops#Edge-Triggered D Flip-flop|Edge-Triggered D Flip-flop]]
	- [[#5.4 Storage Elements: Flip-Flops#Other Flip-flops|Other Flip-flops]]
	- [[#5.4 Storage Elements: Flip-Flops#Characteristic Tables|Characteristic Tables]]
	- [[#5.4 Storage Elements: Flip-Flops#Characteristic Equations|Characteristic Equations]]
	- [[#5.4 Storage Elements: Flip-Flops#Direct Inputs|Direct Inputs]]
- [[#5.5 Analysis of Clocked Seq. Circuits|5.5 Analysis of Clocked Seq. Circuits]]
	- [[#5.5 Analysis of Clocked Seq. Circuits#State Equations|State Equations]]
		- [[#State Equations#Example|Example]]
	- [[#5.5 Analysis of Clocked Seq. Circuits#State Table|State Table]]
	- [[#5.5 Analysis of Clocked Seq. Circuits#State Diagram|State Diagram]]
	- [[#5.5 Analysis of Clocked Seq. Circuits#Flip-flop Input Equations|Flip-flop Input Equations]]
	- [[#5.5 Analysis of Clocked Seq. Circuits#Analysis with D flip-flops|Analysis with D flip-flops]]
	- [[#5.5 Analysis of Clocked Seq. Circuits#Analysis with JK flip-flops|Analysis with JK flip-flops]]
	- [[#5.5 Analysis of Clocked Seq. Circuits#Analysis with T flip-flops|Analysis with T flip-flops]]
	- [[#5.5 Analysis of Clocked Seq. Circuits#Mealy and Moore models of Finite State Machines|Mealy and Moore models of Finite State Machines]]

# 5.1 Synchronous Sequential Logic - Intro

Virtually all consumer electronics have the ability to send, receive and modify digital information, represented in a binary format.
This chapter examines the operation and control of devices utilizing memory; where it has thus far been combinational and thus without the ability to store data.
Sequential circuits act as storage elements, they can store and refer back to information at a later time.

# 5.2 Sequential Circuits
A sequential circuit consists of a combinational circuit to which storage elements are connected to form a feedback path.
The binary info stored in these elements at any given time, determine the *state* of the circuit at that time.
![[Pasted image 20251018195932.png]]
The outputs in a sequential circuit are a function not only of the inputs, but also of the present state of the storage elements.
The next state of the storage elements is also a function of external inputs and the present state. Thus, **a sequential circuit is specified by a time sequence of inputs, outputs, and internal states** . In contrast, the outputs of combinational logic depend only on the present values of the inputs.
There're two main types of seq. circuits, classified as a function of the timing.
- *Synchronous* circuits, are a system that can be defined from the knowledge of its signals at discrete instants of time
- *Asynchronous* circuits depends upon the input signals at that instant of time *and* the order in which the inputs change.
Asynchronous storage elements are typically used in time-delay devices.
	The storage capability of a time-delay device varies with the time it takes for the signal to propagate through the device. In practice, the internal propagation delay of logic gates is of sufficient duration to produce the needed delay, so that actual delay units may not be necessary. In gate-type asynchronous systems, the storage elements consist of logic gates whose propagation delay provides the required storage. Thus, an asynchronous sequential circuit may be regarded as a combinational circuit with feedback. Because of the feedback among logic gates, an asynchronous sequential circuit may become unstable at times. The instability problem imposes many difficulties on the designer

A synchronous circuit employs signals that affect memory at only discrete instants of time.
	Synchronization is achieved by a timing device called a clock generator, which provides a clock signal having the form of a periodic train of clock pulses . The clock signal is commonly denoted by the identifiers clock and clk . The clock pulses are distributed throughout the system in such a way that storage elements are affected only with the arrival of each pulse. In practice, the clock pulses determine when computational activity will occur within the circuit, and other signals (external inputs and otherwise) determine what changes will take place affecting the storage elements and the outputs. For example, a circuit that is to add and store two binary numbers would compute their sum from the values of the numbers and store the sum at the occurrence of a clock pulse. Synchronous sequential circuits that use clock pulses to control storage elements are called clocked sequential circuits and are the type most frequently encountered in practice. They are called synchronous circuits because the activity within the circuit and the resulting updating of stored values is synchronized to the occurrence of clock pulses. The design of synchronous circuits is feasible because they seldom manifest instability problems and their timing is easily broken down into independent discrete steps, each of which can be considered separately.
![[Pasted image 20251018201909.png]]

The storage elements used in seq. circuits are called flip-flops.
A flip-flop is a binary storage device that can store 1 bit of information; in a stable state the output of the flip-flip is either 1 or 0.
In a synchronous seq. circuit A change in state of the flip-flops is initiated only by a clock pulse transition—for example, when the value of the clock signals changes from 0 to 1. When a clock pulse is not active, the feedback loop between the value stored in the flip-flop and the value formed at the input to the flip-flop is effectively broken because the flipflop outputs cannot change even if the outputs of the combinational circuit driving their inputs change in value. Thus, the transition from one state to the next occurs only at predetermined intervals dictated by the clock pulses.
# 5.3 Storage Elements: Latches
Storage elements in a digital circuit can maintain a binary state as long as power is delivered to the element.
The major differences among various types of storage elements are in the number of inputs they possess and in the manner in which the inputs affect the binary state.
	Storage elements that operate with signal levels (rather than signal transitions) are referred to as latches ; those controlled by a clock transition are flip-flops.
		Latches are *level sensitive* devices, while flip-flips are *edge sensitive*.

The two types are related, as latches are the basic circuit from which all flip-flops are constructed.
## SR latch
The SR latch is comprised of 2 cross-coupled NOR gates or 2 cross-coupled NAND gates; with 2 inputs *S* and a reset *R*.
![[Pasted image 20251019115912.png]]
![[Pasted image 20251019115923.png]]
The state of the latch when *R* is ***NOT*** active is called the *set state*, the state when *R* is active is called the *reset state*.
The outputs *Q* and  *Q'* are usually complements of each other.
	When both inputs are = 1, at the same time, a *"forbidden state"* in which both output are the same (0) occurs rather than them being complementary.
	Consequently, in practical applications, setting both inputs to 1 is forbidden.

In a NOR SR latch.
The first condition (*S* = 1, *R* = 0), is the action required by *S*
to put the circuit into *set state*. 
Removing the active *S* input, leaves the circuit in the same *set state*.
After both inputs return to 0, it's then possible to shift the latch to the *reset state* (*S* = 0, *R* = 1).
If both *S* and *R* are 1 both outputs go to 0 producing an undefined next state.

In a NAND SR latch.
Works similarly to the NOR latch, but starts with both inputs being 1.
The application of *0* on *S* causes *Q* to go to 1, putting it in *set state*. After both go back to 1, putting 0 on *R* puts the latch into *reset state*.
The *forbidden state* on the NAND SR latch is when both inputs = 0 at the same time

The operation of the basic SR latch can be modified by providing an additional input signal that determines (controls) when the state of the latch can be changed by determining whether S and R (or S and R) can affect the circuit.
![[Pasted image 20251019123250.png]]
The outputs of the NAND gates stay at the logic-1 level as long as the enable signal remains at 0.
This is the quiescent condition for the SR latch. When the enable input goes to 1, information from the S or R input is allowed to affect the latch. The set state is reached with *S* = 1, *R* = 0, and *En* = 1

## D Latch (Transparent Latch)
One way to eliminate the forbidden condition of the SR latch, is to make it impossible for both inputs to be the same at the same time.
This is done in the D latch.

This latch has 2 inputs, *D* (data) and *En* (enable).
![[Pasted image 20251019123547.png]]
![[Pasted image 20251019123600.png]]
The *D* Input goes directly to the *S* input of the SR component, and its complement is applied to the R input. This way the input to *S* and/or *R* will never be the same.
The *En* input acts as the control input turning the D component and subsequently the SR component on/off.
# 5.4 Storage Elements: Flip-Flops
The state of a latch or flip-flip is switched by a change in control input.
This change is called a *trigger*.

Flip-flop circuits are constructed in such a way as to make them operate properly when they are part of a sequential circuit that employs a common clock. 
	The problem with the latch is that it responds to a change in the level of a clock pulse
![[Pasted image 20251019130531.png]]
The key to the proper operation of a flip-flop is to trigger it only during a signal transition . This can be accomplished by eliminating the feedback path that is inherent in the operation of the sequential circuit using latches.

There are two ways that a latch can be modified to form a flip-flop. 
- One way is to employ two latches in a special configuration that isolates the output of the flip-flop and prevents it from being affected while the input to the flip-flop is changing.
- Another way is to produce a flip-flop that triggers only during a signal transition (from 0 to 1 or from 1 to 0) of the synchronizing signal (clock) and is disabled during the rest of the clock pulse
## Edge-Triggered D Flip-flop
A D flip-flop is constructed with 2 D latches and an inverter.
![[Pasted image 20251019130824.png]]
When the clock (Clk) is disabled (= 0), the slave is enabled because of the inverter. And its output *Q* is equal to the master output *Y*. When the clock becomes active (= 1), the master gets input data *D* while the slave is disabled, giving no output.
Any input *D* changes the output *Y* of the master, but cannot affect the slave output *Q*.
When the clock then returns to 0 the master is again disabled and is isolated from any updates in *D*; at the same time re-enabling the salve and the value *Y* is transferred to the output of the flip-flop *Q*.

The behavior of the master–slave flip-flop just described dictates that 
1.  the output may change only once, 
2. a change in the output is triggered by the negative edge of the clock, and 
3. the change may occur only during the clock’s negative level.
	It is also possible to design the circuit so that the flip-flop output changes on the positive edge of the clock. This happens in a flip-flop that has an additional inverter between the Clk terminal and the junction between the other inverter and input En of the master latch. Such a flip-flop is triggered with a negative pulse, so that the negative edge of the clock affects the master and the positive edge affects the slave and the output terminal

![[Pasted image 20251019131539.png]]
Another constructiong af an edge-triggered D flip-flop uses 3 SR latches. 
Two latches respond to the external *D* (data) and *Clk* (clock) inputs. With the third providing the outputs of the flip-flop.

The *S* and *R* inputs of the 3rd output latch are maintained when Clk = 0.
	This causes the output to remain in the present state
- If D = 0 when Clk becomes 1, R changes to 0. This causes the flip-flop to go to the reset state, making Q = 0.
- If there is a change in the D input while Clk = 1, terminal R remains at 0 because Q is 0.
Thus, the flip-flop is locked out and is unresponsive to further changes in the input.
- Similarly, if D = 1 when Clk goes from 0 to 1, S changes to 0. This causes the circuit to go to the set state, making Q = 1. Any change in D while Clk = 1 does not affect the output.
In sum, when the input clock in the positive-edge-triggered flip-flop makes a positive transition, the value of D is transferred to Q . A negative transition of the clock (i.e., from 1 to 0) does not affect the output, nor is the output affected by changes in D when Clk is in the steady logic-1 level or the logic-0 level. Hence, this type of flip-flop responds to the transition from 0 to 1 and nothing else.

The timing of the response of a flip-flop to input data and to the clock must be taken into consideration when one is using edge-triggered flip-flops. There is a minimum time called *the setup time* during which the D input must be maintained at a constant value prior to the occurrence of the clock transition. Similarly, there is a minimum time called *the hold time* during which the D input must not change after the application of the positive transition of the clock. 
The propagation delay time of the flip-flop is defined as the interval between the trigger edge and the stabilization of the output to a new state. These and other parameters are specified in manufacturers’ data books for specific logic families.
![[Pasted image 20251019132431.png]]
## Other Flip-flops
Two flip-flops less widely used in the design of digital systems are the JK and T flip-flops.
![[Pasted image 20251019152324.png]]
There are three operations that can be performed with a flip-flop: Set it to 1, reset it to 0, or complement its output. With only a single input, the D flip-flop can set or reset the output, depending on the value of the D input immediately before the clock transition. Synchronized by a clock signal, the JK flip-flop has two inputs and performs all three operations.
![[Pasted image 20251019152345.png]]
![[Pasted image 20251019152401.png]]

The T (toggle) flip-flop is a complementing flip-flop and can be obtained from a JK flip-flop when inputs J and K are tied together.
![[Pasted image 20251019152443.png]]
![[Pasted image 20251019152450.png]]
![[Pasted image 20251019152457.png]]
## Characteristic Tables
A characteristic table defines the logical properties of a flip-flop by describing its operation in tabular form.
![[Pasted image 20251019152546.png]]
They define the next state (i.e., the state that results from a clock transition) as a function of the inputs and the present state. Q ( t ) refers to the present state (i.e., the state present prior to the application of a clock edge). Q(t + 1) is the next state one clock period later.
	Note that the clock edge input is not included in the characteristic table, but is implied to occur between times t and t + 1

- The characteristic table for the JK flip-flop shows that the next state is equal to the present state when inputs J and K are both equal to 0. This condition can be expressed as Q(t + 1) = Q(t), indicating that the clock produces no change of state. When K = 1 and J = 0, the clock resets the flip-flop and Q(t + 1) = 0. With J = 1 and K = 0, the flip-flop sets and Q(t + 1) = 1. When both J and K are equal to 1, the next state changes to the complement of the present state, a transition that can be expressed as Q(t + 1) = Q(t).

- The next state of a D flip-flop is dependent only on the D input and is independent of the present state. This can be expressed as Q(t + 1) = D. It means that the next-state value is equal to the value of D.

- The characteristic table of the T flip-flop has only two conditions: When T = 0, the clock edge does not change the state; when T = 1, the clock edge complements the state of the flip-flop.
## Characteristic Equations
The logical properties of a flip-flop, as described in the characteristic table, can be expressed algebraically with a characteristic equation.

For a D flip-flop
![[Pasted image 20251019152913.png]]
Which states the value of input D in the present state.

For a JK flip-flop
![[Pasted image 20251019152948.png]]
Where Q is the value of the flip-flop output prior to the application of the clock edge.

For T flip-flop
![[Pasted image 20251019153027.png]]
## Direct Inputs
Some flip-flops have asynchronous inputs that are used to force the flip-flop to a particular state independently of the clock.
The input that sets the flip-flop to 1 is called *preset* or *direct set* . The input that clears the flip-flop to 0 is *called clear* or *direct reset*.
	When power is turned on in a digital system, the state of the flip-flops is unknown. The direct inputs are useful for bringing all flip-flops in the system to a known starting state prior to the clocked operation.
![[Pasted image 20251019153228.png]]
![[Pasted image 20251019153235.png]]
The function table specifies the operation of the circuit. When R = 0, the output is reset to 0. This state is independent of the values of D or Clk . Normal clock operation can proceed only after the reset input goes to logic 1. The clock at Clk is shown with an upward arrow to indicate that the flip-flop triggers on the positive edge of the clock. The value in D is transferred to Q with every positive-edge clock signal, provided that R = 1.
# 5.5 Analysis of Clocked Seq. Circuits
Analysis describes what a given circuit will do under certain operating conditions.
The analysis of a sequential circuit consists of obtaining a table or a diagram for the time sequence of inputs, outputs, and internal states.
## State Equations
The behavior of a clocked sequential circuit can be described algebraically by means of state equations.
A *state equation* (also called a *transition equation*) specifies the next state, as a function of the present state and inputs.
### Example
![[Pasted image 20251020115944.png]]
The example circuit consists of two D flip-flops *A* and *B*, input *x* and output *y*.
Since the *D* input determines the value of the next state, it's possible to write a set of state equations:
![[Pasted image 20251020121027.png]]
	A state equation is an algebraic expression that specifies the condition for a flip-flop state transition. The left side of the equation, with (t + 1), denotes the next state of the flip-flop one clock edge later. The right side of the equation is a Boolean expression that specifies the present state and input conditions that make the next state equal to 1.
Since all the variables in the Boolean expressions are a function of the present state, we can omit the designation ( t ) after each variable for convenience and can express the state equations in the more compact form.
![[Pasted image 20251020121130.png]]

The Boolean expression(s) for the state equation can be derived directly from the gates that form the *combinational part* of the seq. circuit.
Since the *D* value(s) of the combinational determine the next state.
![[Pasted image 20251020122500.png]]
simply removing the *t* symbol for the present state, leaves us with the boolean output at the present instant of time.
![[Pasted image 20251020122552.png]]
## State Table
Similarly to a truth table for combinational, the time sequence of inputs, outputs and states can be put into a *state table*.
The table consists of four sections
- Present state
- Input
- Future/Next State
- Output
The present-state shows the state of the flip-flop(s) at any given time *t*
The input gives the value of input *x* for each possible state
The next-state shows the state of the flip-flop(s) one clock-cycle into the future at *t+1*.
The output gives the value of output *y* for each present state and condition.

![[Pasted image 20251020125331.png]]
## State Diagram
The information in a state table can be represented graphically.
![[Pasted image 20251020125819.png]]
A state is represented by a circle and the (clock-triggered) transitions between states are indicated by lines.
![[Pasted image 20251020125925.png]]
## Flip-flop Input Equations
The logic diagram of a sequential circuit consists of flip-flops and gates. The interconnections among the gates form a combinational circuit and may be specified algebraically with Boolean expressions.

For example, the following input equation specifies an OR gate with inputs x and y connected to the D input of a flip-flop whose output is labeled with the symbol Q:
![[Pasted image 20251020130551.png]]

A circuit consisting of two D flip-flops A and B, an input x, and an output y . The logic diagram of the circuit can be expressed algebraically with two flip-flop input equations and an output equation:
![[Pasted image 20251020130629.png]]
## Analysis with D flip-flops
![[Pasted image 20251020130708.png]]
The DA symbol implies a D flip-flop with output A . The x and y variables are the inputs to the circuit. No output equations are given, which implies that the output comes from the output of the flip-flop
The state table has one column for the present state of flip-flop A, two columns for the two inputs, and one column for the next state of A . The binary numbers under Axy are listed from 000 through 111, The next-state values are obtained from the state equation.
![[Pasted image 20251020130754.png]]
The present state and the output can be either 0 or 1, as indicated by the number inside the circles. A slash on the directed lines is not needed, because there is no output from a combinational circuit. The two inputs can have four possible combinations for each state. Two input combinations during each state transition are separated by a comma to simplify the notation..
![[Pasted image 20251020130906.png]]
## Analysis with JK flip-flops
A state table consists of four sections: present state, inputs, next state, and outputs. The first two are obtained by listing all binary combinations. The output section is determined from the output equations. The next-state values are evaluated from the state equations. For a D -type flip-flop, the state equation is the same as the input equation. When a flip-flop other than the D type is used, such as JK or T, it is necessary to refer to the corresponding characteristic table or characteristic equation to obtain the nextstate values. We will illustrate the procedure first by using the characteristic table and again by using the characteristic equation.
![[Pasted image 20251020130920.png]]
![[Pasted image 20251020131014.png]]
![[Pasted image 20251020130931.png]]
![[Pasted image 20251020130941.png]]
## Analysis with T flip-flops
The analysis of a sequential circuit with T flip-flops follows the same procedure outlined for JK flip-flops. The next-state values in the state table can be obtained by using either the characteristic table or equation.
![[Pasted image 20251020131050.png]]
![[Pasted image 20251020131057.png]]
The values for y are obtained from the output equation. The values for the next state can be derived from the state equations by substituting TA and TB in the characteristic equations, yielding:
![[Pasted image 20251020131113.png]]
The next-state values for A and B in the state table are obtained from the expressions of the two state equations.
As long as input x is equal to 1, the circuit behaves as a binary counter with a sequence of states 00, 01, 10, 11, and back to 00. When x = 0, the circuit remains in the same state. Output y is equal to 1 when the present state is 11. Here, the output depends on the present state only and is independent of the input. The two values inside each circle and separated by a slash are for the present state and output.
## Mealy and Moore models of Finite State Machines
The most general model of a sequential circuit has inputs, outputs, and internal states. It is customary to distinguish between two models of sequential circuits: the Mealy model and the Moore model.
They differ only in the way the output is generated.
![[Pasted image 20251020131234.png]]
![[Pasted image 20251020131242.png]]
![[Pasted image 20251020131254.png]]
- In the Mealy model, the output is a function of both the present state and the input.
- In the Moore model, the output is a function of only the present state. 
	- A circuit may have both types of outputs.
The two models of a sequential circuit are commonly referred to as a finite state machine, abbreviated FSM. The Mealy model of a sequential circuit is referred to as a Mealy FSM or Mealy machine. The Moore model is referred to as a Moore FSM or Moore machine.
***In a Moore model, the outputs of the sequential circuit are synchronized with the clock, because they depend only on flip-flop outputs that are synchronized with the clock.***
	In a Mealy model, the outputs may change if the inputs change during the clock cycle.
Moreover, the outputs may have momentary false values because of the delay encountered from the time that the inputs change and the time that the flip-flop outputs change. In order to synchronize a Mealy-type circuit, the inputs of the sequential circuit must be synchronized with the clock and the outputs must be sampled immediately before the clock edge. The inputs are changed at the inactive edge of the clock to ensure that the inputs to the flip-flops stabilize before the active edge of the clock occurs. Thus, the output of the Mealy machine is the value that is present immediately before the active edge of the clock.